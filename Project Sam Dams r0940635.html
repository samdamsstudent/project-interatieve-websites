<!doctype html>
<html lang="nl">
<head>
    <meta charset="utf-8">
    <meta name="author" content="Sam Dams"> 
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Formulier Sam Dams r0940635</title>

</head>

<body>
    <main class="container">
      <div class="card-body">
        <div style="width: 60%; float:left; height:100%; margin:10px;">
        <div class="card mt-3 ">
            <div class="card-header">
                Welkom bij het contactformulier van student Sam Dams!
            </div>
                <h1 style="text-align: center;">Laat ons contact houden!</h1>
                <h4 style="text-align: center;">Momenteel nog student, binnenkort collega? </h4>
                <!-- alles over forms: https://getbootstrap.com/docs/4.0/components/forms/ -->
                <!--  mx auto class zorgt voor horizontal center fixing https://getbootstrap.com/docs/4.0/utilities/spacing/-->
                <!--  novaidate zorgt ervoor dat we eigen valideren berichten kunnen geven https://getbootstrap.com/docs/5.0/forms/validation/-->
              
                <form style="margin: 20px;">
                    <div class="row">
                      <div class="col">
                        <label for="voornaam">Geef je voornaam op:</label>
                        <input type="text" id="voornaam" class="form-control" placeholder="Voornaam">
                      </div>
                      <div class="col">
                        <label for="achternaam">Geef je achternaam op:</label>
                        <input type="text" id="achternaam" class="form-control" placeholder="Achternaam">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col">
                            <label class="sr-only" for="gebruikersnaam">Geef je gebruikersnaam op:</label>
                                <div class="input-group mb-2">
                                  <div class="input-group-prepend">
                                    <div class="input-group-text">@</div>
                                  </div>
                                    <input type="text" class="form-control" id="gebruikersnaam" placeholder="r0940635">
                                </div>
                        </div>
                        <div class="col">
                            <label for="email">Geef je mail adres op:</label>
                            <input type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="voorbeeld@email.com">
                            <small id="emailHelp" class="form-text text-muted">Dit mail adres wordt nooit gedeeld met anderen.</small>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col">
                            <label for="wachtwoord">Kies een wachtwoord:</label>
                            <input type="password" id="wachtwoord" class="form-control" aria-describedby="passwordHelpBlock">
                            <small id="passwordHelpBlock" class="form-text text-muted">
                            Je wachtwoord moet minimaal 7 tekens lang zijn en een cijfer bevatten.
                            </small>
                        </div>
                        <div class="col">
                            <label for="checkwachtwoord">Herhaal je wachtwoord:</label>
                            <input type="password" id="checkwachtwoord" class="form-control" aria-describedby="passwordHelpBlock">
                        </div>
                    </div>
                    <br>
                    <div class="form-group">
                        <label for="adres">Wat is je adres:</label>
                        <input type="text" class="form-control" id="adres" placeholder="Uw adres en huisnummer">
                    </div>
                    <br>
                    <div class="row">
                        <div class="form-group col-md-6">
                          <label for="land">Land:</label>
                          <select id="land" class="form-control">
                            <!--geen bestaande placeholders voor select box https://www.tutorialrepublic.com/faq/how-to-make-a-placeholder-for-a-select-box-in-html.php-->
                            <option value="" disabled selected hidden>Kies een land</option>
                            <option>België</option>
                            <option>Frankrijk</option>
                            <option>Duitsland</option>
                            <option>Nederland</option>
                            <option>Spanje</option>
                            <option>Italië</option>
                            <option>Griekenland</option>
                            <option>Polen</option>
                            <option>Portugal</option>
                          </select>
                        </div>
                        <div class="form-group col-md-4">
                          <label for="provincie">Provincie</label>
                          <select id="provincie" class="form-control">
                            <option value="" disabled selected hidden>Kies een provincie</option>
                            <option>Antwerpen</option>
                            <option>Limburg</option>
                            <option>Oost-Vlaanderen</option>
                            <option>West-Vlaanderen</option>
                            <option>Vlaams-Brabant</option>
                          </select>
                        </div>
                        <div class="form-group col-md-2">
                          <label for="postcode">Postcode:</label>
                        <input type="text" id="postcode" class="form-control" placeholder="2000" required>
                        </div>
                    </div>     
                    <hr>
                    <div class="row">
                      <div class="col">
                        <h4>Hou me op de hoogte</h4>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                          <label class="form-check-label" for="defaultCheck1">
                            Inschrijven op de nieuwsbrief.
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="" id="defaultCheck2">
                          <label class="form-check-label" for="defaultCheck2">
                            Ik ga akkoord met de algemene voorwaarden.
                          </label>
                        </div>
                      </div>
                      <div class="col">
                        <h4>Betaling</h4>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
                          <label class="form-check-label" for="exampleRadios1">
                            Banking app
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
                          <label class="form-check-label" for="exampleRadios2">
                            Overschrijving
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3">
                          <label class="form-check-label" for="exampleRadios3">
                            Visa card
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios4" value="option4">
                          <label class="form-check-label" for="exampleRadios4">
                            PayPal
                          </label>
                        </div>
                      </div>
                    </div>
                    <hr>
                    <button type="button" id="submitknop" class="btn btn-primary" style="margin-bottom: 15px;">Ja! Ik ben tevreden!</button>
                </form>
              </div>
        </div>
        <div style="width: 30%; float:left; height:100%; margin:15px">
          <!--padding nog vrbergen-->
          <div id="errors" style="background-color: hwb(323 51% 9% / 0.836); padding: 10px;">
          </div>
        </div>
      </div>
    </main>
</body>

<script>
  let knop = document.getElementById("submitknop");
  let errors = new Array();

  validateForm = () => {
    let voornaam = document.getElementById("voornaam").value;
    let achternaam = document.getElementById("achternaam").value;
    let gebruikersnaam = document.getElementById("gebruikersnaam").value;
    let email = document.getElementById("email").value;
    let wachtwoord = document.getElementById("wachtwoord").value;
    let checkwachtwoord = document.getElementById("checkwachtwoord").value;
    let adres = document.getElementById("adres").value;
    let land = document.getElementById("land").value;
    let provincie = document.getElementById("provincie").value;
    let postcode = document.getElementById("postcode").value;

    //hier eigenlijk melding nodig maar kortere tekst is efficiënter
    //controle op lege velden
    checkEmptyField(voornaam,"voornaam");
    checkEmptyField(achternaam,"achternaam");
    checkEmptyField(gebruikersnaam,"gebruikersnaam");
    checkEmptyField(adres,"adres");
    checkEmptyField(land,"land");
    checkEmptyField(provincie,"provincie");

    let checkemail = validateEmail(email);
    if (checkemail == false) errors.push("E-mailadres is niet correct.");
    //toevoegen aan array as false
    

    //We itereren door de arrar met een for loop om de foutmeldingen te tonen
    // hier nog als array leeg is dan juist, anders dit
    for (let i = 0; i < errors.length; i++) {
      document.getElementById('errors').innerHTML += `${errors[i]}<br>`;
        }
  };

  knop.addEventListener("click", validateForm,false);
  //nog brek toevoefen om dubbel te vermijden?
  checkEmptyField = (veld, melding) => {
      let zin = "";

      if (veld == ""){
            zin += `Het veld ${melding} is vereist.`;
            errors.push(zin);         
    }
    //aangezien we zelf een optie hebben ingevuld definëren we deze als fout. dit zou gven dat als iemand in een ander veld
    // kies een land of kies een provinvie invuld dit ook fout is, maar dat is hier onzinning
    else if (veld == "Kies een land"){
            zin += `Het veld ${melding} is vereist.`;
            errors.push(zin);         
    }

    //aangezien we zelf een optie hebben ingevuld definëren we deze als fout
    else if (veld == "Kies een provincie"){
            zin += `Het veld ${melding} is vereist.`;
            errors.push(zin);         
    }
  };
  
  //hier nog het streepje van e- fiksen, dit geeft fout. hier bvb als toegevoegd tellen en dan skipt de rest, lege waarde nog fiksen
  validateEmail = email => {
      //eerst mail opslitsen in gebruikersnaam en domein https://linuxhint.com/split-full-name-into-first-and-last-in-javascript/
      //break toevoegen?
      let mail = email.split('@');
      let gebruikersnaam = mail[0];
      //eerste letter: https://www.freecodecamp.org/news/how-to-capitalize-the-first-letter-of-a-string-in-javascript/
      let eersteKarakterGebruikersnaam = gebruikersnaam.charAt(0);
      let domein = mail[1];
      let eersteKarakterDomein = domein.charAt(0);
      let controle = 0;   

      //voorwaarden gebruikersnaam: minstens 1 char lang 
      if (gebruikersnaam.length < 1){
          controle ++;           
      }

      //voorwaarden gebruikersnaam: eerste char geen punt of koppelteken
      if (eersteKarakterGebruikersnaam == "." || eersteKarakterGebruikersnaam == "-"){
          controle ++;
      }

      //voorwaarden gebruikersnaam: enkel letters, nummers of underscores (en punten of koppeltekens hier, niet als eerste is hierboven getest) bevatten. 
      //Geeft true terug als input enkel wat binnen haakjes bevat. https://regexr.com./ https://codingbeautydev.com/blog/javascript-check-if-string-contains-only-letters-and-numbers/?utm_content=cmp-true https://stackoverflow.com/questions/28708711/regex-must-start-with-a-letter-or-number-string-can-only-have-letters-numbers
      if (/^[_.A-Za-z0-9-]*$/.test(gebruikersnaam) == false) controle ++;

      //voorwaarden domein: eerste char letter of nummer
      if (/^[A-Za-z0-9]*$/.test(eersteKarakterDomein) == false) controle ++;

      //voorwaarden domein: mag punt of koppelteken bevatten. Hier niet opgegeven maar ik ga er van uit letters en nummers ook. Hier geen underscores toegestaan.
      if (/^[.A-Za-z0-9-]*$/.test(gebruikersnaam) == false) controle ++;

      //controle:document.write(controle)
      //if not null than false
      if (controle == 0){
          return true;
      }

      else {return false;}
  };

</script>


<!-- TO DO:
  nog toevoegen: <h4 style="color: brown;">Yikes, errors..</h4><br>
tekst in errors nog kleur geven
//nog goed toevoegen
domein mail is alles achter de @-->

